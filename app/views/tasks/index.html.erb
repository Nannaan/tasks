<div class="contents-row">
  <div class="task-post">
  <a class="post" href="/tasks/new">タスクを追加する</a>
    <% @tasks.each do |task| %>
      <div class="task-list">
        <label>
          <input type="checkbox">
          <span class="task-name"><%= task.task_name %></span>
          <%# 所要時間 %>
          <% if task.required_time.present? %>
            <span class="required_time">所要時間 <%= task.required_time %></span>
          <% else %>
            <span class="required_time"></span>
          <% end %>
          <%# タスク期限 %>
          <% if task.deadline.present? %>
            <span class="deadline"><%= task.deadline.strftime("%m/%d %H:%M") %> まで</span>
          <% else %>
            <span class="deadline"></span>
          <% end %>
        </label>
        <div class="task-edit">
          <button><%= link_to '編集', edit_task_path(task.id), method: :get %></button>
          <button><%= link_to '削除', task_path(task.id), method: :delete %></button>
        </div>
      </div>
    <% end %>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const checkboxes = document.querySelectorAll(".task-list input[type='checkbox']");

    checkboxes.forEach(function(checkbox) {
      checkbox.addEventListener("change", function() {
        const taskName = this.nextElementSibling;
        if (this.checked) {
          taskName.classList.add("completed");
        } else {
          taskName.classList.remove("completed");
        }
      });
    });
  });
</script>